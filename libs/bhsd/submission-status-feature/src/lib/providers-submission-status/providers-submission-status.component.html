<h1>Provider Submission Overview</h1>
<div class="filters">
  <div class="filter">
    <label for="reportingPeriod">Reporting Period</label>
    <div class="filters">
      <select
        name="rpMonthFilter"
        id="rpMonthFilter"
        (change)="updateFilters('month', $event)"
      >
        <option value="">Select Month</option>
        <option
          *ngFor="let month of monthList"
          [value]="month.getMonth()"
          [selected]="rpMonthFilter - 1 === month.getMonth()"
          (change)="updateFilters('month', $event)"
        >
          {{ month | date: 'MMMM' }}
        </option>
      </select>
      <select
        name="rpYearFilter"
        id="rpYearFilter"
        (change)="updateFilters('year', $event)"
      >
        <option value="">Select Year</option>
        <option
          *ngFor="let year of yearList"
          [value]="year"
          [selected]="year.toString() === rpYearFilter.toString()"
          (change)="updateFilters('year', $event)"
        >
          {{ year }}
        </option>
      </select>
    </div>
  </div>
  <div class="filter">
    <label for="statusFilter">Submission Status</label>
    <select
      name="statusFilter"
      id="statusFilter"
      (change)="updateFilters('status', $event)"
    >
      <option value="" disabled hidden selected>Select Status</option>
      <option value="">See All</option>
      <option value="Current" [selected]="statusFilter === 'Current'">
        Current
      </option>
      <option
        value="Expecting Submission"
        [selected]="statusFilter === 'Expecting Submission'"
      >
        Expecting Submission
      </option>
      <option
        value="Need Resubmission"
        [selected]="statusFilter === 'Need Resubmission'"
      >
        Need Resubmission
      </option>
      <option value="Past Due" [selected]="statusFilter === 'Past Due'">
        Past Due
      </option>
    </select>
  </div>
</div>
<div class="filters">
  <div class="filter">
    <h2>Total Records</h2>
    <div class="filters">
      <div>
        <label for="trMinFilter">Minimum Records</label>
        <input
          type="number"
          min="0"
          step="1"
          id="trMinFilter"
          name="trMinFilter"
          [value]="trMinFilter"
          (change)="updateFilters('trMin', $event)"
        />
      </div>
      <div>
        <label for="trMaxFilter">Maximum Records</label>
        <input
          type="number"
          min="0"
          step="1"
          id="trMaxFilter"
          name="trMaxFilter"
          [value]="trMaxFilter"
          (change)="updateFilters('trMax', $event)"
        />
      </div>
    </div>
  </div>
</div>

<h2>Submission Summary</h2>
<table>
  <thead>
    <tr>
      <th>Provider Name</th>
      <th>Service Type</th>
      <th>Submission Status</th>
      <th>Submitted On</th>
      <th>Total Records</th>
      <th>Pass</th>
      <th>Fail</th>
      <th>Pass Rate</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let submission of submissionStatus$ | async">
      <td>
        <a
          [routerLink]="[
            '/provider-gateway/provider-profile',
            submission.providerId
          ]"
          >{{ submission.providerName }}</a
        >
      </td>
      <td class="service-type">
        {{ serviceType(submission) }}
      </td>
      <td>{{ submission.status }}</td>
      <td>
        <a
          *ngIf="submission.extractId !== undefined"
          [routerLink]="['/provider-gateway/submissions', submission.extractId]"
          >{{
            submission.submittedOn === undefined
              ? 'N/A'
              : (submission.submittedOn | date)
          }}
        </a>
        <span *ngIf="submission.extractId === undefined">N/A</span>
      </td>
      <td>{{ submission.totalRecords ?? 'N/A' }}</td>
      <td>{{ submission.pass ?? 'N/A' }}</td>
      <td>{{ submission.fail ?? 'N/A' }}</td>
      <td>{{ submission | passRate }}</td>
    </tr>
  </tbody>
</table>
