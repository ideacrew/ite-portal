<h1>Provider Extract Information</h1>
<form [formGroup]="extractForm">
  <div class="input-group">
    <label for="coverage-start">Coverage Start Date</label>
    <input
      type="date"
      name="coverage-start"
      id="coverage-start"
      formControlName="coverage_start"
    />
    <span *ngIf="debug">
      Errors: {{ extractForm.get('coverage_start')!.errors | json }}</span
    >
  </div>

  <div class="input-group">
    <label for="coverage-end">Coverage End Date</label>
    <input
      type="date"
      name="coverage-end"
      id="coverage-end"
      formControlName="coverage_end"
    />
    <span *ngIf="debug">
      Errors: {{ extractForm.get('coverage_end')!.errors | json }}</span
    >
  </div>

  <div class="input-group">
    <label for="extract-date">Date Data was Extracted</label>
    <input
      type="date"
      name="extract-date"
      id="extract-date"
      formControlName="extracted_on"
    />
    <span *ngIf="debug">
      Errors: {{ extractForm.get('extracted_on')!.errors | json }}</span
    >
  </div>

  <fieldset>
    <legend>Transaction Group:</legend>
    <input
      type="radio"
      id="transaction-group-admission"
      name="transaction_group"
      value="admission"
      formControlName="transaction_group"
    />
    <label for="transaction-group-admission">Admission</label>
    <input
      type="radio"
      id="transaction-group-discharge"
      name="transaction_group"
      value="discharge"
      formControlName="transaction_group"
    />
    <label for="transaction-group-discharge">Discharge/Update</label>
    <span *ngIf="debug">
      Errors: {{ extractForm.get('transaction_group')!.errors | json }}</span
    >
  </fieldset>
  <!-- <div class="input-group">
    <label for="file-upload">Upload Extract Here:</label>
    <input type="file" name="file-upload" id="file-upload" />
  </div> -->
</form>

<button
  [disabled]="extractForm.status === 'INVALID'"
  type="button"
  (click)="sendData()"
>
  Send Data
</button>

<div *ngIf="debug" class="debug-container">
  <div class="column">
    <h2>Form Value:</h2>
    <pre
      >{{ extractForm.value | json }}
    </pre>
  </div>
  <div class="column">
    <h2>Form Errors:</h2>
    <pre
      >{{ extractForm.errors | json }}
    </pre>
  </div>
</div>

<button class="debug-toggle" type="button" (click)="debug = !debug">
  Debugging {{ debug ? '❌' : '✅' }}
</button>
